# ============================================================================
# SmilePile Production Environment Configuration
# ============================================================================
# Production environment configuration
# This file should be committed to version control
# SECRETS MUST BE IN SEPARATE secrets/production.env FILE

# Include base configuration
# Source base.env when loading this environment

# Environment Identification
ENVIRONMENT_NAME="production"
ENVIRONMENT_TYPE="production"
ENVIRONMENT_COLOR="#FF0000"

# API Configuration
API_BASE_URL="https://api.smilepile.app/api"
API_TIMEOUT="30"
API_RETRY_COUNT="3"
API_USE_MOCK="false"
API_RATE_LIMIT="1000"

# Database Configuration
DATABASE_HOST="prod-db.smilepile.internal"
DATABASE_PORT="5432"
DATABASE_NAME="smilepile_production"
DATABASE_POOL_SIZE="50"
DATABASE_SSL_ENABLED="true"
DATABASE_SSL_REQUIRE="true"
DATABASE_CONNECTION_TIMEOUT="5000"
DATABASE_IDLE_TIMEOUT="30000"

# Build Configuration
BUILD_TYPE="release"
ANDROID_BUILD_VARIANT="release"
IOS_BUILD_CONFIGURATION="Release"
OPTIMIZE_FOR_PRODUCTION="true"
STRIP_DEBUG_SYMBOLS="true"

# Security Configuration (STRICT)
DEBUG_MODE="false"
ENABLE_DEBUG_MENU="false"
ENABLE_PERFORMANCE_MONITORING="false"
ENABLE_NETWORK_LOGGING="false"
LOG_LEVEL="ERROR"
LOG_SENSITIVE_DATA="false"

# Production Security
ENABLE_CERTIFICATE_PINNING="true"
ENABLE_ROOT_DETECTION="true"
ENABLE_TAMPER_DETECTION="true"
ENABLE_JAILBREAK_DETECTION="true"
ALLOW_HTTP_TRAFFIC="false"
SSL_PINNING_HOSTS="api.smilepile.app,cdn.smilepile.app,storage.smilepile.app"
ENFORCE_SECURE_CONNECTIONS="true"
ENABLE_ANTI_DEBUGGING="true"
ENABLE_CODE_OBFUSCATION="true"

# Testing in Production
RUN_UNIT_TESTS="false"
RUN_INTEGRATION_TESTS="false"
RUN_SMOKE_TESTS="true"
SYNTHETIC_MONITORING="true"
SYNTHETIC_CHECK_INTERVAL="300"

# Performance Configuration
ENABLE_CACHING="true"
CACHE_TTL_SECONDS="86400"
ENABLE_COMPRESSION="true"
ENABLE_CDN="true"
CDN_BASE_URL="https://cdn.smilepile.app"
ENABLE_HTTP2="true"
ENABLE_RESOURCE_HINTS="true"

# Monitoring Configuration (CRITICAL)
MONITORING_ENABLED="true"
APM_ENABLED="true"
APM_SAMPLE_RATE="0.01"
ERROR_TRACKING_ENABLED="true"
ERROR_TRACKING_ENVIRONMENT="production"
ERROR_SAMPLE_RATE="0.1"
REAL_USER_MONITORING="true"
RUM_SAMPLE_RATE="0.05"

# High Availability Configuration
ENABLE_LOAD_BALANCING="true"
ENABLE_AUTO_SCALING="true"
MIN_INSTANCES="3"
MAX_INSTANCES="20"
TARGET_CPU_UTILIZATION="60"
ENABLE_HEALTH_CHECKS="true"
HEALTH_CHECK_PATH="/health"
HEALTH_CHECK_INTERVAL="10"
HEALTH_CHECK_TIMEOUT="5"

# Storage Configuration
STORAGE_BASE_URL="https://storage.smilepile.app"
BACKUP_ENABLED="true"
BACKUP_RETENTION_DAYS="30"
BACKUP_ENCRYPTION="true"
ENABLE_DISASTER_RECOVERY="true"
DISASTER_RECOVERY_RTO="4"
DISASTER_RECOVERY_RPO="1"

# Notification Configuration
PUSH_NOTIFICATION_SERVER="https://push.smilepile.app"
ENABLE_PUSH_NOTIFICATIONS="true"
NOTIFICATION_TEST_MODE="false"
EMAIL_SERVICE_URL="https://email.smilepile.app"
SMS_SERVICE_URL="https://sms.smilepile.app"

# Production Signing (Android)
ANDROID_KEYSTORE_PATH="/secure/production/android.keystore"
ANDROID_KEY_ALIAS="production-key"
ANDROID_V2_SIGNING_ENABLED="true"
# Passwords MUST be in secrets file

# Production Signing (iOS)
IOS_CODE_SIGN_IDENTITY="iPhone Distribution: SmilePile Inc."
IOS_PROVISIONING_PROFILE="SmilePile Production"
IOS_EXPORT_METHOD="app-store"
IOS_UPLOAD_SYMBOLS="true"
# Certificates MUST be in secure storage

# Feature Flags (Production - Conservative)
FEATURE_A_B_TESTING="true"
FEATURE_CANARY_RELEASES="true"
FEATURE_REMOTE_CONFIG="true"
FEATURE_GRADUAL_ROLLOUT="true"
FEATURE_KILL_SWITCH="true"
FEATURE_EMERGENCY_DISABLE="true"

# Analytics Configuration
ANALYTICS_ENABLED="true"
ANALYTICS_DEBUG_MODE="false"
ANALYTICS_BATCH_SIZE="100"
ANALYTICS_FLUSH_INTERVAL="120"
ANALYTICS_ENDPOINT="https://analytics.smilepile.app"
ANALYTICS_ENCRYPTION="true"

# Compliance and Privacy
GDPR_COMPLIANT="true"
CCPA_COMPLIANT="true"
COPPA_COMPLIANT="true"
DATA_RETENTION_DAYS="365"
PII_ENCRYPTION="true"
AUDIT_LOGGING="true"
AUDIT_LOG_RETENTION="2555"

# Deployment Configuration
DEPLOY_STRATEGY="blue-green"
DEPLOYMENT_APPROVAL_REQUIRED="true"
ROLLBACK_ENABLED="true"
AUTOMATIC_ROLLBACK="true"
ROLLBACK_TIMEOUT="300"
CANARY_PERCENTAGE="5"
CANARY_DURATION="3600"

# Critical Alerting
ALERT_ENABLED="true"
ALERT_THRESHOLD_ERROR_RATE="0.001"
ALERT_THRESHOLD_RESPONSE_TIME="500"
ALERT_THRESHOLD_CPU="70"
ALERT_THRESHOLD_MEMORY="70"
ALERT_THRESHOLD_DISK="80"
ALERT_CHANNELS="pagerduty,slack,email,sms"
INCIDENT_RESPONSE_TEAM="ops@smilepile.app"

# Rate Limiting and DDoS Protection
RATE_LIMIT_ENABLED="true"
RATE_LIMIT_REQUESTS_PER_MINUTE="60"
RATE_LIMIT_BURST="100"
DDOS_PROTECTION="true"
WAF_ENABLED="true"
CLOUDFLARE_ENABLED="true"

# Resource Limits (Production Scale)
MAX_CONCURRENT_USERS="10000"
MAX_REQUEST_SIZE_MB="5"
MAX_UPLOAD_SIZE_MB="100"
REQUEST_TIMEOUT="30000"
IDLE_TIMEOUT="120000"

# Service Dependencies (Production)
REDIS_CLUSTER="redis://prod-redis-cluster.smilepile.internal:6379"
ELASTICSEARCH_CLUSTER="https://prod-es-cluster.smilepile.internal:9200"
MESSAGE_QUEUE_CLUSTER="amqp://prod-mq-cluster.smilepile.internal:5672"
DATABASE_READ_REPLICAS="prod-db-read-1,prod-db-read-2,prod-db-read-3"

# Third-party Services (Production)
FIREBASE_PROJECT_ID="smilepile-production"
SENTRY_ENVIRONMENT="production"
MIXPANEL_ENVIRONMENT="production"
STRIPE_ENVIRONMENT="live"
GOOGLE_PLAY_TRACK="production"
APP_STORE_CONNECT_TEAM_ID="TEAM123456"

# Business Metrics
TRACK_REVENUE_METRICS="true"
TRACK_USER_METRICS="true"
TRACK_PERFORMANCE_METRICS="true"
BUSINESS_INTELLIGENCE_ENABLED="true"

# SLA Configuration
SLA_UPTIME_TARGET="99.95"
SLA_RESPONSE_TIME_P95="1000"
SLA_RESPONSE_TIME_P99="2000"
SLA_ERROR_RATE_MAX="0.1"

# Maintenance Window
MAINTENANCE_WINDOW_DAY="Sunday"
MAINTENANCE_WINDOW_START="02:00"
MAINTENANCE_WINDOW_END="06:00"
MAINTENANCE_WINDOW_TIMEZONE="UTC"